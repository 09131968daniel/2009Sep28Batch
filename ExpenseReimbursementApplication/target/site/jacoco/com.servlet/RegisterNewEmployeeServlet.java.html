<?xml version="1.0" encoding="UTF-8"?><!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd"><html xmlns="http://www.w3.org/1999/xhtml" lang="en"><head><meta http-equiv="Content-Type" content="text/html;charset=UTF-8"/><link rel="stylesheet" href="../jacoco-resources/report.css" type="text/css"/><link rel="shortcut icon" href="../jacoco-resources/report.gif" type="image/gif"/><title>RegisterNewEmployeeServlet.java</title><link rel="stylesheet" href="../jacoco-resources/prettify.css" type="text/css"/><script type="text/javascript" src="../jacoco-resources/prettify.js"></script></head><body onload="window['PR_TAB_WIDTH']=4;prettyPrint()"><div class="breadcrumb" id="breadcrumb"><span class="info"><a href="../jacoco-sessions.html" class="el_session">Sessions</a></span><a href="../index.html" class="el_report">Project1</a> &gt; <a href="index.source.html" class="el_package">com.servlet</a> &gt; <span class="el_source">RegisterNewEmployeeServlet.java</span></div><h1>RegisterNewEmployeeServlet.java</h1><pre class="source lang-java linenums">package com.servlet;

import java.io.IOException;
import java.io.PrintWriter;
import java.security.NoSuchAlgorithmException;
import java.sql.Connection;
import java.sql.PreparedStatement;
import java.sql.SQLException;
import java.sql.Timestamp;

import javax.servlet.ServletException;
import javax.servlet.http.HttpServlet;
import javax.servlet.http.HttpServletRequest;
import javax.servlet.http.HttpServletResponse;

import com.dao.EmployeeDao;
import com.util.ConnectionUtil;
import com.util.MyHash;

/**
 * Servlet implementation class RegisterNewEmployeeServlet
 */
public class RegisterNewEmployeeServlet extends HttpServlet {
	private static final long serialVersionUID = 1L;
       
    /**
     * @see HttpServlet#HttpServlet()
     */
    public RegisterNewEmployeeServlet() {
<span class="fc" id="L30">        super();</span>
        // TODO Auto-generated constructor stub
<span class="fc" id="L32">    }</span>

	/**
	 * @see HttpServlet#doGet(HttpServletRequest request, HttpServletResponse response)
	 */
	protected void doGet(HttpServletRequest request, HttpServletResponse response) throws ServletException, IOException {
		// TODO Auto-generated method stub
<span class="nc" id="L39">		response.getWriter().append(&quot;Served at: &quot;).append(request.getContextPath());</span>
<span class="nc" id="L40">	}</span>

	/**
	 * @see HttpServlet#doPost(HttpServletRequest request, HttpServletResponse response)
	 */
	public void doPost(HttpServletRequest req, HttpServletResponse resp) throws ServletException, IOException 
	{
<span class="fc" id="L47">		resp.setContentType(&quot;text/html&quot;);</span>
		
<span class="fc" id="L49">		PrintWriter out = resp.getWriter();</span>
		
<span class="fc" id="L51">		String fmid = &quot;&quot;;</span>
<span class="fc" id="L52">		String inputUsername = &quot;&quot;;</span>
<span class="fc" id="L53">		String inputpassword = &quot;&quot;;</span>
<span class="fc" id="L54">		String firstname = &quot;&quot;;</span>
<span class="fc" id="L55">		String lastname = &quot;&quot;;</span>
<span class="fc" id="L56">		String email = &quot;&quot;;</span>
		try
		{
<span class="fc" id="L59">		fmid = req.getParameter(&quot;fmid&quot;);</span>
<span class="fc" id="L60">		inputUsername = req.getParameter(&quot;usrname&quot;);</span>
<span class="fc" id="L61">		inputpassword = req.getParameter(&quot;pword&quot;);</span>
<span class="fc" id="L62">		firstname = req.getParameter(&quot;fname&quot;);</span>
<span class="fc" id="L63">		lastname = req.getParameter(&quot;lname&quot;);</span>
<span class="fc" id="L64">		email = req.getParameter(&quot;email&quot;);</span>
		} 
<span class="nc" id="L66">		catch(NullPointerException e)</span>
		{
<span class="nc" id="L68">			System.out.println(&quot;Values were being tested so they were null&quot;);</span>
<span class="fc" id="L69">		}</span>
		
<span class="fc" id="L71">		MyHash mh = new MyHash(inputpassword, &quot;SHA-256&quot;);</span>
		
<span class="fc" id="L73">		String hashedPassword = &quot;&quot;;</span>
<span class="fc" id="L74">		int fmID = 0;</span>
		try
		{
<span class="nc" id="L77">		fmID = Integer.parseInt(fmid);</span>
		
		try {
<span class="nc" id="L80">			hashedPassword = MyHash.generateHash(inputpassword, &quot;SHA-256&quot;);</span>
<span class="nc" id="L81">		} catch (Exception e) </span>
		{
<span class="nc" id="L83">			System.out.println(&quot;testing...&quot;);</span>
<span class="nc" id="L84">			e.printStackTrace();</span>
<span class="nc" id="L85">		}</span>
<span class="fc" id="L86">		} catch (Exception e)</span>
		{
<span class="fc" id="L88">			System.out.println(&quot;testing..&quot;);</span>
<span class="nc" id="L89">		}</span>
		
<span class="fc" id="L91">		String sql = &quot;insert into \&quot;Project1\&quot;.users (username, password, first_name, last_name, email, user_role_id)\n&quot;</span>
				+ &quot;values (?, ?, ?, ?, ?, ?);&quot;;
		
<span class="fc" id="L94">		Timestamp ts = new Timestamp(System.currentTimeMillis());</span>
		
<span class="fc" id="L96">		try (Connection conn = ConnectionUtil.getInstance().getConnection();</span>
<span class="fc" id="L97">				PreparedStatement ps = conn.prepareStatement(sql)) </span>
		{
<span class="fc" id="L99">			ps.setString(1, inputUsername);</span>
<span class="fc" id="L100">			ps.setString(2, hashedPassword);</span>
<span class="fc" id="L101">			ps.setString(3, firstname);</span>
<span class="fc" id="L102">			ps.setString(4, lastname);</span>
<span class="fc" id="L103">			ps.setString(5, email);</span>
<span class="fc" id="L104">			ps.setInt(6, 1);</span>
<span class="fc" id="L105">			int rs = ps.executeUpdate();</span>
			
			
				
<span class="nc" id="L109">		}catch(SQLException e)</span>
		{
<span class="nc" id="L111">			System.out.println(&quot;can't add employee to database&quot;);</span>
<span class="nc" id="L112">			e.printStackTrace();</span>
<span class="fc" id="L113">		}</span>
		
<span class="fc" id="L115">		EmployeeDao ed = new EmployeeDao();</span>
		
<span class="fc" id="L117">		String fullname =ed.findfullNamebyUserID(fmID);</span>
		
<span class="fc" id="L119">		out.println(&quot;&lt;!doctype html&gt;\n&quot;</span>
				+ &quot;&lt;html lang=\&quot;en\&quot;&gt;\n&quot;
				+ &quot;&lt;head&gt;\n&quot;
				+ &quot;    &lt;meta charset=\&quot;UTF-8\&quot;&gt;\n&quot;
				+ &quot;    &lt;meta name=\&quot;viewport\&quot;\n&quot;
				+ &quot;          content=\&quot;width=device-width, user-scalable=no, initial-scale=1.0, maximum-scale=1.0, minimum-scale=1.0\&quot;&gt;\n&quot;
				+ &quot;    &lt;meta http-equiv=\&quot;X-UA-Compatible\&quot; content=\&quot;ie=edge\&quot;&gt;\n&quot;
				+ &quot;    &lt;!-- Bootstrap CSS Files --&gt;\n&quot;
				+ &quot;    &lt;link rel=\&quot;stylesheet\&quot; href=\&quot;https://use.fontawesome.com/releases/v5.8.1/css/all.css\&quot;&gt;\n&quot;
				+ &quot;    &lt;link rel=\&quot;stylesheet\&quot; href=\&quot;html_css_js/font-awesome-5.8.1.css\&quot;&gt;\n&quot;
				+ &quot;    &lt;link rel=\&quot;stylesheet\&quot; href=\&quot;html_css_js/bootstrap.css\&quot;&gt;\n&quot;
				+ &quot;    &lt;link rel=\&quot;stylesheet\&quot; href=\&quot;html_css_js/mdb.css\&quot;&gt;\n&quot;
				+ &quot;    &lt;link rel=\&quot;stylesheet\&quot; href=\&quot;html_css_js/style.css\&quot;&gt;\n&quot;
				+ &quot;&lt;link href=\&quot;http://maxcdn.bootstrapcdn.com/bootstrap/3.3.0/css/bootstrap.min.css\&quot; rel=\&quot;stylesheet\&quot; id=\&quot;bootstrap-css\&quot;&gt;\n&quot;
				+ &quot;&lt;script src=\&quot;http://maxcdn.bootstrapcdn.com/bootstrap/3.3.0/js/bootstrap.min.js\&quot;&gt;&lt;/script&gt;\n&quot;
				+ &quot;&lt;script src=\&quot;http://code.jquery.com/jquery-1.11.1.min.js\&quot;&gt;&lt;/script&gt;\n&quot;
				+ &quot;&lt;link rel=\&quot;stylesheet\&quot; href=\&quot;html_css_js/userprofile.css\&quot; &gt;&quot;
				+ &quot;    &lt;title&gt;WJLaw Dashboard&lt;/title&gt;\n&quot;
				+ &quot;&lt;/head&gt;\n&quot;
				+ &quot;&lt;body&gt;\n&quot;
				+ &quot;\n&quot;
				+ &quot;    &lt;!-- Main Navbar --&gt;\n&quot;
				+ &quot;    &lt;nav class=\&quot;navbar navbar-expand-sm navbar-dark bg-dark\&quot;&gt;\n&quot;
				+ &quot;        &lt;div class=\&quot;container\&quot;&gt;\n&quot;
				+ &quot;            &lt;a href=\&quot;html_css_js/loginpage.html\&quot; class=\&quot;navbar-brand text-warning\&quot;&gt;\n&quot;
				+ &quot;               &lt;i class=\&quot;fa fa-snowflake\&quot;&gt;&lt;/i&gt;WJLaw LLC\n&quot;
				+ &quot;            &lt;/a&gt;\n&quot;
				+ &quot;            &lt;button class=\&quot;navbar-toggler\&quot; data-toggle=\&quot;collapse\&quot; data-target=\&quot;#ui-navbar\&quot;&gt;\n&quot;
				+ &quot;                &lt;span class=\&quot;navbar-toggler-icon\&quot;&gt;&lt;/span&gt;\n&quot;
				+ &quot;            &lt;/button&gt;\n&quot;
				+ &quot;\n&quot;
				+ &quot;            &lt;div class=\&quot;collapse navbar-collapse\&quot; id=\&quot;ui-navbar\&quot;&gt;\n&quot;
				+ &quot;                &lt;ul class=\&quot;navbar-nav ml-auto\&quot;&gt;\n&quot;
				+ &quot;                    &lt;li class=\&quot;nav-item\&quot;&gt;\n&quot;
				+ &quot;                        &lt;a class=\&quot;nav-link\&quot; href=\&quot;http://localhost:8080/ExpenseReimbursementApplication/\&quot;&gt;\n&quot;
				+ &quot;                            &lt;i class=\&quot;fa fa-sign-out-alt text-muted\&quot;&gt;&lt;/i&gt; LogOut&lt;/a&gt;\n&quot;
				+ &quot;                    &lt;/li&gt;\n&quot;
				+ &quot;                &lt;/ul&gt;\n&quot;
				+ &quot;            &lt;/div&gt;\n&quot;
				+ &quot;        &lt;/div&gt;\n&quot;
				+ &quot;    &lt;/nav&gt;\n&quot;
				+ &quot;\n&quot;
				+ &quot;\n&quot;
				+ &quot;&lt;div class=\&quot;container\&quot;&gt;\n&quot;
				+ &quot;    &lt;div class=\&quot;row profile\&quot;&gt;\n&quot;
				+ &quot;		&lt;div class=\&quot;col-md-3\&quot;&gt;\n&quot;
				+ &quot;			&lt;div class=\&quot;profile-sidebar\&quot;&gt;\n&quot;
				+ &quot;				&lt;!-- SIDEBAR USERPIC --&gt;\n&quot;
				+ &quot;				&lt;div class=\&quot;profile-userpic\&quot;&gt;\n&quot;
				+ &quot;					&lt;img src=\&quot;https://static.change.org/profile-img/default-user-profile.svg\&quot; class=\&quot;img-responsive\&quot; alt=\&quot;\&quot;&gt;\n&quot;
				+ &quot;				&lt;/div&gt;\n&quot;
				+ &quot;				&lt;!-- END SIDEBAR USERPIC --&gt;\n&quot;
				+ &quot;				&lt;!-- SIDEBAR USER TITLE --&gt;\n&quot;
				+ &quot;				&lt;div class=\&quot;profile-usertitle\&quot;&gt;\n&quot;
				+ &quot;					&lt;div class=\&quot;profile-usertitle-name\&quot;&gt;\n&quot;
				+ fullname
				+ &quot;					&lt;/div&gt;\n&quot;
				+ &quot;					&lt;div class=\&quot;profile-usertitle-job\&quot;&gt;\n&quot;
				+ &quot;						Finance Manager/Partner\n&quot;
				+ &quot;					&lt;/div&gt;\n&quot;
				+ &quot;				&lt;/div&gt;\n&quot;
				+ &quot;				&lt;!-- END SIDEBAR USER TITLE --&gt;\n&quot;
				+ &quot;				&lt;!-- SIDEBAR MENU --&gt;\n&quot;
				+ &quot;				&lt;div class=\&quot;profile-usermenu\&quot;&gt;\n&quot;
				+ &quot;					&lt;ul class=\&quot;nav\&quot;&gt;\n&quot;
				+ &quot;                      &lt;form action=\&quot;http://localhost:8080/ExpenseReimbursementApplication/ViewPendingReimbServlet\&quot; method=\&quot;POST\&quot; &quot;
				+ &quot;						&lt;li&gt;\n&quot;
				+ &quot; &lt;div&gt; &lt;button class=\&quot;form__btn\&quot; type=\&quot;submit\&quot;&gt;View Pending Reimbursement Tickets&lt;/button&gt;  &lt;/div&gt;&quot;	
				+ &quot;							\n&quot;
				+ &quot;						&lt;/li&gt;\n&quot;
				+ &quot;                      &lt;/form&gt;&quot;
				+ &quot;						&lt;li&gt;\n&quot;
				+ &quot;							&lt;a href=\&quot;html_css_js/regnewemp.html\&quot;&gt;\n&quot;
				+ &quot;							&lt;i class=\&quot;glyphicon glyphicon-ok\&quot;&gt;&lt;/i&gt;\n&quot;
				+ &quot;							Register New Employee Account &lt;/a&gt;\n&quot;
				+ &quot;						&lt;/li&gt;\n&quot;
				+ &quot;						&lt;li&gt;\n&quot;
				+ &quot;							&lt;a href=\&quot;html_css_js/approvereimb.html\&quot;&gt;\n&quot;
				+ &quot;							&lt;i class=\&quot;glyphicon glyphicon-ok\&quot;&gt;&lt;/i&gt;\n&quot;
				+ &quot;							Approve Reimbursement Ticket &lt;/a&gt;\n&quot;
				+ &quot;						&lt;/li&gt;\n&quot;
				+                       &quot;&lt;li&gt;\n&quot;
				+ &quot;							&lt;a href=\&quot;html_css_js/rejectreimb.html\&quot;&gt;\n&quot;
				+ &quot;							&lt;i class=\&quot;glyphicon glyphicon-ok\&quot;&gt;&lt;/i&gt;\n&quot;
				+ &quot;							Reject Reimbursement Ticket &lt;/a&gt;\n&quot;
				+ &quot;						&lt;/li&gt;\n&quot;
				+ &quot;					&lt;/ul&gt;\n&quot;
				+ &quot;				&lt;/div&gt;\n&quot;
				+ &quot;				&lt;!-- END MENU --&gt;\n&quot;
				+ &quot;			&lt;/div&gt;\n&quot;
				+ &quot;		&lt;/div&gt;\n&quot;
				+ &quot;		&lt;div class=\&quot;col-md-9\&quot;&gt;\n&quot;
				+ &quot;            &lt;div class=\&quot;profile-content\&quot;&gt;\n&quot;
				+ &quot;			   Malesuada accumsan accumsan litora convallis tellus ligula mi eros primis. Aenean morbi sit sollicitudin aenean, orci quis dictum eleifend eros. Libero tortor, sagittis natoque! Nulla ac feugiat dictumst imperdiet risus. Habitant lacinia magna porta cum. Nisi mollis duis diam quisque quam vitae sollicitudin. Amet volutpat fringilla metus integer urna luctus ut volutpat gravida aenean. Nunc, volutpat diam torquent lacinia augue fames tempor parturient massa amet.\n&quot;
				+ &quot;&lt;br&gt;\n&quot;
				+ &quot;&lt;br&gt;\n&quot;
				+ &quot;Non metus tortor purus etiam augue facilisis ad massa, litora duis. Tortor consectetur, blandit ipsum felis sagittis. Inceptos justo sociosqu volutpat eu, himenaeos pharetra ac vivamus felis dapibus hendrerit. Mauris sodales volutpat eleifend parturient vivamus fringilla dictum morbi proin habitasse euismod. Quisque praesent interdum aliquet himenaeos sagittis amet adipiscing non tempus ultricies diam tempus! Lorem cum leo tellus aptent orci vel vivamus. Blandit pharetra blandit pellentesque ut. Felis dis torquent, nam vel aptent sociis. Elit nostra sit sed inceptos mauris magna rutrum quam porttitor magnis tristique proin? Duis facilisi enim nisi vulputate orci felis amet tristique enim nec netus quam. Elementum ipsum fermentum risus ac mi scelerisque ridiculus mus, metus aenean purus. Cum tristique cum aliquam bibendum aptent justo, orci cursus nisl netus. Platea ac tristique cum ut nibh egestas senectus! Platea mi faucibus velit adipiscing natoque aliquam montes leo. Potenti vulputate?\n&quot;
				+ &quot;&lt;br&gt;\n&quot;
				+ &quot;&lt;br&gt;\n&quot;
				+ &quot;Eleifend amet feugiat ac imperdiet pulvinar nisl. Dictum blandit elit ut facilisis vitae nulla, libero risus nec ut blandit cursus. Sollicitudin interdum, orci sit. Vel tempor ipsum tempor lectus fringilla tellus lobortis eget, eu ullamcorper orci. Fusce ornare ridiculus praesent primis ornare magna ullamcorper ornare mauris litora odio! Primis lobortis cum dictum cum accumsan tortor magna gravida; vestibulum eget! Elementum class netus neque ornare. Porta sodales pretium vulputate aenean pretium accumsan vehicula iaculis. Montes ac consectetur molestie nisl tellus eget. Venenatis class lacus sem litora netus maecenas facilisis cursus. Dictumst tempor nullam dignissim curabitur lacus? \n&quot;
				+ &quot;            &lt;/div&gt;\n&quot;
				+ &quot;		&lt;/div&gt;\n&quot;
				+ &quot;	&lt;/div&gt;\n&quot;
				+ &quot;&lt;/div&gt;&quot;
				+ &quot;\n&quot;
				+ &quot;    &lt;!-- Main Footer --&gt;\n&quot;
				+ &quot;    &lt;footer class=\&quot;p-3 bg-dark text-white text-center\&quot;&gt;\n&quot;
				+ &quot;        &lt;div class=\&quot;container\&quot;&gt;\n&quot;
				+ &quot;            &lt;div class=\&quot;row\&quot;&gt;\n&quot;
				+ &quot;                &lt;div class=\&quot;col\&quot;&gt;\n&quot;
				+ &quot;                    &lt;h3&gt;Copyright &amp;copy; 2020 , WJLaw LLC&lt;/h3&gt;\n&quot;
				+ &quot;                    &lt;h6&gt;All Rights Reserved&lt;/h6&gt;\n&quot;
				+ &quot;                &lt;/div&gt;\n&quot;
				+ &quot;            &lt;/div&gt;\n&quot;
				+ &quot;        &lt;/div&gt;\n&quot;
				+ &quot;    &lt;/footer&gt;\n&quot;
				+ &quot;\n&quot;
				+ &quot;\n&quot;
				+ &quot;&lt;!-- Bootstrap  JS Files --&gt;\n&quot;
				+ &quot;&lt;script src=\&quot;bootstrap/js/jquery.js\&quot;&gt;&lt;/script&gt;\n&quot;
				+ &quot;&lt;script src=\&quot;bootstrap/js/popper.js\&quot;&gt;&lt;/script&gt;\n&quot;
				+ &quot;&lt;script src=\&quot;bootstrap/js/bootstrap.js\&quot;&gt;&lt;/script&gt;\n&quot;
				+ &quot;&lt;script src=\&quot;bootstrap/js/mdb.js\&quot;&gt;&lt;/script&gt;\n&quot;
				+ &quot;&lt;script src=\&quot;https://cdn.ckeditor.com/4.14.0/standard/ckeditor.js\&quot;&gt;&lt;/script&gt;\n&quot;
				+ &quot;    &lt;script&gt;\n&quot;
				+ &quot;        CKEDITOR.replace( 'editor1' );\n&quot;
				+ &quot;    &lt;/script&gt;\n&quot;
				+ &quot;&lt;/body&gt;\n&quot;
				+ &quot;&lt;/html&gt;&quot;);

<span class="fc" id="L249">	}</span>

}
</pre><div class="footer"><span class="right">Created with <a href="http://www.jacoco.org/jacoco">JaCoCo</a> 0.8.3.201901230119</span></div></body></html>